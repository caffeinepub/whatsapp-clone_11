{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix false 'username already taken' error on signup",
  "requirements": [
    {
      "id": "REQ-10",
      "summary": "Normalize username to lowercase on signup form before submission to prevent false 'username already taken' errors",
      "acceptanceCriteria": [
        "The username submitted to the backend during signup is trimmed and lowercased.",
        "The signup form still validates that the username is non-empty after trimming.",
        "Error messages for truly taken usernames remain visible; no false-positive 'username already taken' errors appear for unique usernames."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/SignupPage.tsx",
          "operation": "modify",
          "description": "Update the signup form to normalize the username value before submission. Apply .trim().toLowerCase() to the username field when calling the registerUser mutation. Ensure form validation checks the normalized username is non-empty. Keep existing password validation, strength indicators, and auto-login flow unchanged."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Update the useRegisterUser mutation hook to normalize the username parameter by trimming and lowercasing it before passing to actor.registerUser. This ensures consistent normalization even if called from other components in the future."
        }
      ]
    }
  ]
}